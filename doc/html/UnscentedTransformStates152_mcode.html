<pre class="code">
<span class="srcline"><span class="lineno"><a href="54,1"> 1</a></span><span class="line"><span class="comment">%% UnscentedTransformStates --  performs unscented transform given a model function</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,2"> 2</a></span><span class="line"><span class="comment">% Input -----------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,3"> 3</a></span><span class="line"><span class="comment">%        X      : sigma points</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,4"> 4</a></span><span class="line"><span class="comment">%        Wm     : weights for mean</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,5"> 5</a></span><span class="line"><span class="comment">%        Wc     : weights for covraiance</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,6"> 6</a></span><span class="line"><span class="comment">%        inputs : model inputs</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,7"> 7</a></span><span class="line"><span class="comment">%        dt     : time elapsed</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,8"> 8</a></span><span class="line"><span class="comment">%        L      : </span></span></span>
<span class="srcline"><span class="lineno"><a href="54,9"> 9</a></span><span class="line"><span class="comment">% Output ---------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,10">10</a></span><span class="line"><span class="comment">%        y  : transformed mean</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,11">11</a></span><span class="line"><span class="comment">%        Y  : transformed sampling points</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,12">12</a></span><span class="line"><span class="comment">%        P  : transformed covariance</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,13">13</a></span><span class="line"><span class="comment">%        dY : transformed deviations</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,14">14</a></span><span class="line"><span class="comment">% ----------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,15">15</a></span><span class="line"><span class="comment">%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,16">16</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T2U3">y</span>,<span class="var type1" id="S3T19U4">Y</span>,<span class="var type1" id="S4T1U5">P</span>,<span class="var type1" id="S5T19U6">dY</span>] = UnscentedTransformStates(<span class="mxinfo" id="T2:U5"><span class="var type1" id="S2T2U9">y</span></span>,<span class="mxinfo" id="T19:U7"><span class="var type1" id="S3T19U10">Y</span></span>,<span class="var type1" id="S6T46U11">X</span>,<span class="var type1" id="S7T20U12">Wm</span>,<span class="var type1" id="S8T20U13">Wc</span>,<span class="var type1" id="S9T2U14">inputs</span>,<span class="var type1" id="S10T3U15">dt</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="54,17">17</a></span><span class="line">coder.inline(<span class="string">'never'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="54,18">18</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,19">19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="54,20">20</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S12T3U24">k</span>=<span class="mxinfo" id="T3:U15">1</span>:<span class="mxinfo" id="T3:U16">size(<span class="var type1" id="S6T46U29">X</span>,2)</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,21">21</a></span><span class="line">    <span class="mxinfo" id="T2:U18"><span class="mxinfo" id="T2:U19"><span class="var type1" id="S3T19U34">Y</span>(<span class="mxinfo" id="T69:U21">:</span>,<span class="var type1" id="S12T3U36">k</span>)</span>=<span class="mxinfo" id="T2:U23"><span class="fcn" id="F112N2:B38">Heli_model</span>(<span class="mxinfo" id="T51:U24"><span class="var type1" id="S6T46U40">X</span>(<span class="mxinfo" id="T15:U26">:</span>,<span class="var type1" id="S12T3U42">k</span>)</span>,<span class="var type1" id="S9T2U43">inputs</span>,<span class="var type1" id="S10T3U44">dt</span>)</span></span>;     </span></span>
<span class="srcline"><span class="lineno"><a href="54,22">22</a></span><span class="line">    <span class="mxinfo" id="T2:U30"><span class="var type1" id="S2T2U47">y</span>=<span class="mxinfo" id="T2:U32"><span class="var type1" id="S2T2U49">y</span>+<span class="mxinfo" id="T2:U34"><span class="mxinfo" id="T3:U35"><span class="var type1" id="S7T20U52">Wm</span>(<span class="var type1" id="S12T3U53">k</span>)</span>*<span class="mxinfo" id="T2:U38"><span class="var type1" id="S3T19U55">Y</span>(<span class="mxinfo" id="T69:U40">:</span>,<span class="var type1" id="S12T3U57">k</span>)</span></span></span></span>;       </span></span>
<span class="srcline"><span class="lineno"><a href="54,23">23</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="54,24">24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="54,25">25</a></span><span class="line"><span class="mxinfo" id="T19:U42"><span class="var type1" id="S5T19U60">dY</span>=<span class="mxinfo" id="T19:U44"><span class="var type1" id="S3T19U62">Y</span>-<span class="mxinfo" id="T19:U46"><span class="var type1" id="S2T2U64">y</span>(<span class="mxinfo" id="T69:U48">:</span>,<span class="mxinfo" id="T94:U49">ones(1,size(<span class="var type1" id="S6T46U71">X</span>,2))</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="54,26">26</a></span><span class="line"><span class="mxinfo" id="T1:U51"><span class="var type1" id="S4T1U75">P</span>=<span class="mxinfo" id="T1:U53"><span class="mxinfo" id="T19:U54"><span class="var type1" id="S5T19U78">dY</span>*<span class="mxinfo" id="T5:U56">diag(<span class="var type1" id="S8T20U81">Wc</span>)</span></span>*<span class="mxinfo" id="T28:U58"><span class="var type1" id="S5T19U83">dY</span>'</span></span></span>;</span></span>
</pre>
