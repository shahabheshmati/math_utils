<pre class="code">
<span class="srcline"><span class="lineno"><a href="72,1"> 1</a></span><span class="line"><span class="comment">%% UnscentedTransformStates --  performs unscented transform given a model function</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="72,3"> 3</a></span><span class="line"><span class="comment">% Input -----------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,4"> 4</a></span><span class="line"><span class="comment">%        X      : sigma points</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,5"> 5</a></span><span class="line"><span class="comment">%        Wm     : weights for mean</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,6"> 6</a></span><span class="line"><span class="comment">%        Wc     : weights for covraiance</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,7"> 7</a></span><span class="line"><span class="comment">%        inputs : model inputs (needed model)</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,8"> 8</a></span><span class="line"><span class="comment">%        type   : availiable measurements</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,9"> 9</a></span><span class="line"><span class="comment">%        m      : size of measurements' vector</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,10">10</a></span><span class="line"><span class="comment">% Output ---------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,11">11</a></span><span class="line"><span class="comment">%        y  : transformed mean</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,12">12</a></span><span class="line"><span class="comment">%        Y  : transformed sampling points</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,13">13</a></span><span class="line"><span class="comment">%        P  : transformed covariance</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,14">14</a></span><span class="line"><span class="comment">%        dY : transformed deviations</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,15">15</a></span><span class="line"><span class="comment">% ----------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,16">16</a></span><span class="line"><span class="comment">%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,17">17</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T47U3">y</span>,<span class="var type1" id="S3T48U4">P</span>,<span class="var type1" id="S4T49U5">dY</span>] = UnscentedTransformMeasurements(<span class="var type1" id="S5T52U8">X</span>,<span class="var type1" id="S6T20U9">Wm</span>,<span class="var type1" id="S7T20U10">Wc</span>,<span class="var type1" id="S8T2U11">inputs</span>,<span class="var type1" id="S9T29U12">type</span>,<span class="var type1" id="S10T3U13">m</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="72,18">18</a></span><span class="line">coder.inline(<span class="string">'never'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="72,19">19</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,20">20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="72,21">21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="72,22">22</a></span><span class="line"><span class="mxinfo" id="T3:U10"><span class="var type1" id="S12T3U22">L</span>=<span class="mxinfo" id="T3:U12">size(<span class="var type1" id="S5T52U25">X</span>,2)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="72,23">23</a></span><span class="line"><span class="mxinfo" id="T47:U14"><span class="var type1" id="S2T47U29">y</span>=<span class="mxinfo" id="T47:U16">zeros(<span class="var type1" id="S10T3U32">m</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="72,24">24</a></span><span class="line"><span class="mxinfo" id="T49:U18"><span class="var type1" id="S15T49U36">Y</span>=<span class="mxinfo" id="T49:U20">zeros(<span class="var type1" id="S10T3U39">m</span>,<span class="var type1" id="S12T3U40">L</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="72,25">25</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="72,26">26</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S16T3U43">k</span>=<span class="mxinfo" id="T3:U24">1</span>:<span class="mxinfo" id="T3:U25"><span class="var type1" id="S12T3U46">L</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="72,27">27</a></span><span class="line">    <span class="mxinfo" id="T47:U27"><span class="mxinfo" id="T47:U28"><span class="var type1" id="S15T49U50">Y</span>(<span class="mxinfo" id="T68:U30">:</span>,<span class="var type1" id="S16T3U52">k</span>)</span>=<span class="mxinfo" id="T47:U32"><span class="fcn" id="F205N3:B54">Measurement_model</span>(<span class="mxinfo" id="T53:U33"><span class="var type1" id="S5T52U56">X</span>(<span class="mxinfo" id="T109:U35">:</span>,<span class="var type1" id="S16T3U58">k</span>)</span>,<span class="var type1" id="S8T2U59">inputs</span>,<span class="var type1" id="S9T29U60">type</span>,<span class="var type1" id="S10T3U61">m</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="72,28">28</a></span><span class="line">    <span class="mxinfo" id="T47:U40"><span class="var type1" id="S2T47U64">y</span>=<span class="var type1" id="S2T47U66">y</span>+<span class="mxinfo" id="T47:U43"><span class="mxinfo" id="T3:U44"><span class="var type1" id="S6T20U69">Wm</span>(<span class="var type1" id="S16T3U70">k</span>)</span>*<span class="mxinfo" id="T47:U47"><span class="var type1" id="S15T49U72">Y</span>(<span class="mxinfo" id="T68:U49">:</span>,<span class="var type1" id="S16T3U74">k</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="72,29">29</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="72,30">30</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="72,31">31</a></span><span class="line"><span class="mxinfo" id="T49:U51"><span class="var type1" id="S4T49U77">dY</span>=<span class="var type1" id="S15T49U79">Y</span>-<span class="mxinfo" id="T49:U54"><span class="var type1" id="S2T47U81">y</span>(<span class="mxinfo" id="T68:U56">:</span>,<span class="mxinfo" id="T94:U57">ones(1,<span class="var type1" id="S12T3U86">L</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="72,32">32</a></span><span class="line"><span class="mxinfo" id="T48:U59"><span class="var type1" id="S3T48U89">P</span>=<span class="mxinfo" id="T48:U61"><span class="mxinfo" id="T49:U62"><span class="var type1" id="S4T49U92">dY</span>*<span class="mxinfo" id="T5:U64">diag(<span class="var type1" id="S7T20U95">Wc</span>)</span></span>*<span class="mxinfo" id="T56:U66"><span class="var type1" id="S4T49U97">dY</span>'</span></span></span>;</span></span>
</pre>
